<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	data-th-replace="~{layouts/layout :: layout-enchere( 
					titrePage=~{:: title},
					contenuPage=~{:: main},
					ressourcesSupp=~{:: #ressources-css}
					)}">

<head>
<!-- Accueil comme titre de page -->
<title>Liste des enchères</title>

<th:block id="ressources-css">
	<link rel="stylesheet" href="/css/encheres.css">
	<script src="/js/articles.js"></script>
</th:block>
</head>
<body>
	<main>
		<section class="entete-encheres">
			<h3 style="text-align: center;">Liste des enchères</h3>
			<div class="container">
				<div class="filtres">
					<label>Filtres :</label> <input type="text" class="input-text"
						placeholder="Le nom de l'article contient"> <label
						for="category">Catégorie :</label> <select id="category"
						class="select-box" onchange="filtrerParCategorie()">
						<option>Toutes</option>
						<option data-th-each="categorie : ${CategoriesEnSession}"
								data-th-text="${categorie.libelle}"
						        data-th-value="${categorie.id}">
						</option>
					</select>
					<th:block
						data-th-if="${#authorization.expression('isAuthenticated()')}">
						<div class="filtres-radios">
							<div class="filtres-radio">
								<input type="radio" id="achats" name="type" checked> <label
									for="achats">Achats</label>
							</div>
							<select class="select-box" id="list-filtre-achats">
								<option>Enchères ouvertes</option>
								<option>Mes enchères en cours</option>
								<option>Mes enchères remportées</option>
							</select>
							<div class="filtres-radio">
								<input type="radio" id="ventes" name="type"> <label
									for="ventes">Mes ventes</label>
							</div>
							<select class="filtres-select" id="list-filtre-ventes" disabled>
								<option>Mes ventes en cours</option>
								<option>Mes ventes non débutées</option>
								<option>Mes ventes terminées</option>
							</select>
						</div>
					</th:block>
				</div>

				<div class="btn-filtres">
					<button class="btn">Rechercher</button>
					<button class="btn">Annuler</button>
				</div>
			</div>
		</section>
		<section class="cards">
			<div class="card mb-8" style="max-width: 540px;"
				data-th-each="article : ${articles}">
				<a data-th-href="@{/articles/detail(id=${article.id})}"
					style="text-decoration: none; color: inherit;">
					<div class="row g-0">
						<div class="col-md-4">
							<img src="" class="img-fluid rounded-start"
								alt="Image de l'article">
						</div>
						<div class="col-md-8">
							<div class="card-body">
								<h5 class="card-title" data-th-text="${article.nom}">Titre
									Article</h5>
								<th:block th:if="${article.prixVente == 0}">
									<p class="card-text"
										data-th-text="${article.prixInitial} + ' point(s)'">Prix</p>
								</th:block>
								<th:block th:unless="${article.prixVente == 0}">
									<p class="card-text"
										data-th-text="${article.prixVente} + ' point(s)'">Prix</p>
								</th:block>

								<p class="card-text" data-th-text="${article.dateFinEncheres}">Fin
									de l'enchère</p>
								<p class="card-text" data-th-text="${article.vendeur.pseudo}">Vendeur</p>
								<a data-th-if="${membreEnSession.pseudo == article.vendeur.pseudo}" data-th-href="@{/articles/modifier(idArticle=${article.id})}">Supprimer</a>

							</div>
						</div>
					</div>
				</a>
			</div>
		</section>
	</main>
</body>
</html>